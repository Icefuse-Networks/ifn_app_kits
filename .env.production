# ==============================================================================
# ICEFUSE NETWORKS - KITS MANAGER CONFIGURATION
# ==============================================================================
# PRODUCTION - This file is used when building for production (npm run build/start).
# Local development values are in .env.local
# ==============================================================================


# ==============================================================================
# DATABASE
# ==============================================================================
# PostgreSQL connection string for kit configurations, server identifiers, etc.
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
#
# This database stores:
#   - Kit configurations
#   - Server identifiers
#   - User kit assignments
#   - Redemption history
#   - Audit logs
#
# Dokploy-managed PostgreSQL container. This is the single source of truth.
# Container: kit-manager-postgres-i5odzl (resolves within Dokploy Docker network)
#
# PORT MAPPING (IMPORTANT):
#   - Internal (Docker network): 5432 (use this for container-to-container)
#   - External (host access):    5434 (use this from outside Docker, e.g., local dev)

DATABASE_URL="postgresql://kits_user:37bf60ec9b098bbf74274d586c0945cbc9df3745105aa0e39486e1db98722d3b@kit-manager-postgres-i5odzl:5432/ifn_kits"


# ==============================================================================
# NEXTAUTH / SESSION
# ==============================================================================
# NextAuth.js configuration for session management.
#
# NEXTAUTH_URL: CRITICAL - Must match the production domain.
#               OAuth callbacks from auth server redirect here.
#
# NEXTAUTH_SECRET: A random 32+ character string used to:
#   - Sign/encrypt JWT session tokens
#   - Encrypt cookies
#   Generate new: openssl rand -hex 32

NEXTAUTH_URL="https://kits.icefuse.net"
NEXTAUTH_SECRET="2091cb9f77c7305308a6fc3d22f6c45ddbe70800dff5968241c2b26741a6d072"


# ==============================================================================
# OIDC AUTHENTICATION (Icefuse Auth)
# ==============================================================================
# Configuration for authenticating with the Icefuse Auth server via OIDC.
#
# AUTH_URL: The auth server's base URL (production)
# ICEFUSE_CLIENT_ID: This app's client ID (registered in auth server)
# ICEFUSE_CLIENT_SECRET: MUST match OIDC_CLIENT_KITS_SECRET in auth server's .env
#                        Generate with: openssl rand -hex 32
#
# AUTH_USER_SYNC_SECRET: Shared secret for cross-app communication
#                        MUST match USER_SYNC_SECRET in auth server's .env
#                        Used for logout sync and user data updates

AUTH_URL="https://accounts.icefuse.com"
ICEFUSE_CLIENT_ID="kits"
ICEFUSE_CLIENT_SECRET="8c4e3f2a1b5d6e7f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f"
AUTH_USER_SYNC_SECRET="78639315540636787d5b98282181cc8505fb3a933d3aa295c506dd2f520909ab"


# ==============================================================================
# CLICKHOUSE (Analytics Database)
# ==============================================================================
# ClickHouse is used for high-performance analytics and time-series data:
#   - Server population stats (player counts every 60 seconds)
#   - Kit usage analytics
#   - Heatmaps and trends
#
# Dokploy-managed ClickHouse container. This is the analytics data store.
# Container: kit-manager-clickhouse-0wpeub-clickhouse (resolves within Dokploy Docker network)
#
# PORT MAPPING (IMPORTANT):
#   - Internal (Docker network): 8123 (use this for container-to-container)
#   - External (host access):    8124 (use this from outside Docker, e.g., local dev)
#
# TEMPORARY: Using external IP until Docker network DNS is fixed
CLICKHOUSE_URL="http://104.129.132.73:8124"
CLICKHOUSE_USER="ifn_analytics"
CLICKHOUSE_PASSWORD="kpsnylcmnaaarc25qbbfgowykmhynez4"
CLICKHOUSE_DATABASE="analytics"


# ==============================================================================
# REDIS (Optional - Caching & Rate Limiting)
# ==============================================================================
# Redis is an in-memory data store used for:
#   - Rate limiting API endpoints
#   - Session caching
#   - Temporary data storage
#
# Format: redis://:PASSWORD@HOST:PORT
# Dokploy-managed Redis container.
#
# PORT MAPPING (IMPORTANT):
#   - Internal (Docker network): 6379 (use this for container-to-container)
#   - External (host access):    6380 (use this from outside Docker, e.g., local dev)

REDIS_URL="redis://:KZWrU2UFbSLFDhFVoOKJaxHn4AQEf67BTIrk303JuvyIp0XN1UEXwxfRFYHM3@kit-manager-redis-abc123:6379"


# ==============================================================================
# BATTLEMETRICS API (Server Stats)
# ==============================================================================
# BattleMetrics API for fetching real-time Rust server information.
# Get your API key from: https://www.battlemetrics.com/developers
#
# Used for:
#   - Server status checks
#   - Player counts (backup if ClickHouse unavailable)
#   - Server metadata

SERVERS_API_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbiI6IjEyZjI3MDUxNmQyYjc3NDMiLCJpYXQiOjE3Mjg3ODg4MTksIm5iZiI6MTcyODc4ODgxOSwiaXNzIjoiaHR0cHM6Ly93d3cuYmF0dGxlbWV0cmljcy5jb20iLCJzdWIiOiJ1cm46dXNlcjo0OTAyNTYifQ.f_cwl1bEnrKRfF0zHCpG5C_-3JHo_f7wjcF44m5AaME"


# ==============================================================================
# OPTIONAL SERVICES
# ==============================================================================

# Steam Web API Key - get from https://steamcommunity.com/dev/apikey
STEAM_API_KEY=""

# Google Tag Manager ID (analytics)
GTM_ID=""

# File storage path for JSON exports
DATA_PATH="/app/data"
